{"version":3,"file":"performance.stories-97215c8d.js","sources":["../../tests/utils/lunatic.ts"],"sourcesContent":["import type { LunaticSource } from '../../src/use-lunatic/type-source';\nimport type { LunaticData, LunaticState } from '../../src/use-lunatic/type';\nimport reduceOnInit from '../../src/use-lunatic/reducer/reduce-on-init';\nimport INITIAL_STATE from '../../src/use-lunatic/initial-state';\nimport { type ActionInit, onInit } from '../../src/use-lunatic/actions';\n\n/**\n * Generate a base state from a source / data for unit testing reducer\n */\nexport function generateState(\n\tsource: LunaticSource,\n\tdata: Record<string, unknown> = {\n\t\tCALCULATED: {},\n\t\tEXTERNAL: {},\n\t\tCOLLECTED: {},\n\t},\n\toptions: Partial<ActionInit['payload']> = {}\n): LunaticState {\n\treturn reduceOnInit(\n\t\tINITIAL_STATE,\n\t\tonInit({\n\t\t\tfeatures: ['VTL'],\n\t\t\tsource,\n\t\t\tdata: 'COLLECTED' in data ? (data as LunaticData) : generateData(data),\n\t\t\t...options,\n\t\t} as ActionInit['payload'])\n\t);\n}\n\n/**\n * Generate LunaticData from a record of values\n */\nexport function generateData<T extends Record<string, unknown>>(\n\tdata: T\n): LunaticData {\n\treturn {\n\t\tCOLLECTED: Object.fromEntries(\n\t\t\tObject.entries(data).map(([key, value]) => [\n\t\t\t\tkey,\n\t\t\t\t{\n\t\t\t\t\tCALCULATED: null,\n\t\t\t\t\tEXTERNAL: null,\n\t\t\t\t\tCOLLECTED: value,\n\t\t\t\t},\n\t\t\t])\n\t\t) as Record<string, any>,\n\t\tCALCULATED: {},\n\t\tEXTERNAL: {},\n\t};\n}\n\nexport function generateVariable({ type = 'COLLECTED', name = 'VARIABLE' }) {\n\treturn {\n\t\tvariableType: type,\n\t\tname: name,\n\t\tvalues: {\n\t\t\tPREVIOUS: null,\n\t\t\tCOLLECTED: null,\n\t\t\tFORCED: null,\n\t\t\tEDITED: null,\n\t\t\tINPUTED: null,\n\t\t},\n\t};\n}\n"],"names":["generateData","data","key","value"],"mappings":"88EAgCO,SAASA,EACfC,EACc,CACP,MAAA,CACN,UAAW,OAAO,YACjB,OAAO,QAAQA,CAAI,EAAE,IAAI,CAAC,CAACC,EAAKC,CAAK,IAAM,CAC1CD,EACA,CACC,WAAY,KACZ,SAAU,KACV,UAAWC,CACZ,CAAA,CACA,CACF,EACA,WAAY,CAAC,EACb,SAAU,CAAC,CAAA,CAEb"}
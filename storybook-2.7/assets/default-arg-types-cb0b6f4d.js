import{j as e,b as s,u as ee,c as te,M as ae,F as se,a as q,B as k,d as re}from"./index-739dd384.js";import{r as o,R as ie}from"./index-e67e0a49.js";const ne=({key:a,overviewEntry:t,goToPage:r})=>{let n="green";return t.reached||(n="grey"),t.visible||(n="red"),e(o.Fragment,{children:s("li",{style:{listStyle:"none",color:n},onClick:()=>r({page:t.page}),children:[s("div",{className:"row",children:[t.page,t.label]}),t.children.length>0&&e(L,{overview:t.children,goToPage:r})]})},a)},L=({overview:a,goToPage:t})=>e("ol",{children:a.map(r=>e(ne,{overviewEntry:r,goToPage:t},`view-${r.lunaticId}`))});L.__docgenInfo={description:"",methods:[],displayName:"Overview"};const oe=""+new URL("preloader-9efc7014.svg",import.meta.url).href;function O({status:a,children:t}){return a?s("div",{className:"waiting",children:[e("img",{src:oe,alt:"loading"}),e("div",{className:"content",children:t})]}):null}O.defaultProps={status:!1};const le=ie.memo(O);O.__docgenInfo={description:"",methods:[],displayName:"Waiting",props:{status:{defaultValue:{value:"false",computed:!1},required:!1}}};function ce(){return{}}function de({goToPage:a,getData:t,lastReachedPage:r}){const[n,d]=o.useState(1);function u(p,l){d(l)}return s("div",{className:"dev-options",children:[s("div",{style:{display:"flex"},children:[e(k,{onClick:()=>q.log(t(!0)),children:"Get Data"}),e(k,{onClick:()=>a({page:`${n}`}),children:`Go to "${n}"`})]}),e(re,{id:"page-to-jump",value:n,handleChange:u,min:1,label:"Page to reach : "})]})}function ue({goPrevious:a,goNext:t,goToPage:r,lastReachedPage:n,isLast:d,isFirst:u,pageTag:p,maxPage:l,getData:P,pager:m}){if(l&&l>1){const h=k;return s(se,{children:[s("div",{className:"pagination",children:[e(h,{onClick:a,disabled:u,children:"Previous"}),e(h,{onClick:t,disabled:d,children:"Next"}),e("div",{style:{fontSize:".8em",opacity:.7,marginTop:".3em"},children:"You can use PgDown / PgUp shortcut"})]}),e(de,{goToPage:r,getData:P,lastReachedPage:n}),s("div",{className:"story-pager",children:[e("h3",{children:"Pager"}),s("ul",{children:[s("li",{children:[e("strong",{children:"PageTag:"})," ",JSON.stringify(p)]}),Object.keys(m).map(g=>s("li",{children:[s("strong",{children:[g,":"]})," ",JSON.stringify(m[g])]},g))]})]})]})}return null}function ge(a,t,r){q.log("onChange",{response:a,value:t,args:r})}function fe(){q.log("no missing strategy")}function D({source:a,data:t,management:r=!1,shortcut:n=!1,activeControls:d=!1,features:u,initialPage:p="1",getStoreInfo:l=ce,missing:P=!1,missingStrategy:m=fe,missingShortcut:h,autoSuggesterLoading:g,addExternal:me,preferences:M,custom:R,showOverview:x=!1,filterDescription:_=!0,getReferentiel:j,dontKnowButton:T,refusedButton:$,readOnly:E,...he}){const{maxPage:A}=a,{getComponents:B,goPreviousPage:C,goNextPage:v,goToPage:V,pager:F,pageTag:f,isFirstPage:G,isLastPage:U,waiting:W,overview:J,compileControls:I,getData:z,Provider:K}=ee(a,t,{initialPage:p,features:u,preferences:M,onChange:ge,custom:R,autoSuggesterLoading:g,getReferentiel:j,management:r,missing:P,missingStrategy:m,missingShortcut:h,shortcut:n,activeControls:d,withOverview:x,dontKnowButton:T,refusedButton:$}),Y=B(),{lastReachedPage:H}=F,[y,Q]=o.useState({}),[N,w]=o.useState(null),X=o.useCallback(i=>{w(void 0),v(i)},[v]),Z=o.useCallback(()=>w(void 0),[]),S=o.useCallback(()=>{const{currentErrors:i,isCritical:c}=I();Q({...y,[f]:i||{}}),i&&Object.keys(i).length>0?w({currentErrors:i,isCritical:c}):v()},[I,y,v,f]);return o.useEffect(()=>{const i=c=>{let b=!1;c.key==="PageDown"&&(S(),b=!0),c.key==="PageUp"&&(C(),b=!0),b&&(c.preventDefault(),c.stopPropagation())};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[S,C]),e(K,{children:s("div",{className:"container story-with-sidebar",children:[e("div",{className:"components",children:e(te,{autoFocusKey:f,components:Y,componentProps:({storeName:i})=>({errors:y[f],filterDescription:_,disabled:E,...i?l(i):{}})})}),s("aside",{children:[e(ue,{goPrevious:C,goNext:S,goToPage:V,lastReachedPage:H,isLast:U,isFirst:G,pageTag:f,maxPage:A,getData:z,pager:F}),x&&e(L,{overview:J,goToPage:V}),N&&e(ae,{errors:N.currentErrors,goNext:X,onClose:Z,isCritical:N.isCritical}),e(le,{status:W,children:e("div",{className:"waiting-orchestrator",children:"Initialisation des donnÃ©es de suggestion..."})})]})]})})}const Ce=o.memo(D);D.__docgenInfo={description:"",methods:[],displayName:"OrchestratorForStories",props:{management:{defaultValue:{value:"false",computed:!1},required:!1},shortcut:{defaultValue:{value:"false",computed:!1},required:!1},activeControls:{defaultValue:{value:"false",computed:!1},required:!1},initialPage:{defaultValue:{value:"'1'",computed:!1},required:!1},getStoreInfo:{defaultValue:{value:`function getStoreInfoRequired() {
	return {};
}`,computed:!1},required:!1},missing:{defaultValue:{value:"false",computed:!1},required:!1},missingStrategy:{defaultValue:{value:`function logMissingStrategy() {
	Logger.log('no missing strategy');
}`,computed:!1},required:!1},showOverview:{defaultValue:{value:"false",computed:!1},required:!1},filterDescription:{defaultValue:{value:"true",computed:!1},required:!1}}};const pe=["source","id","pagination","data","management","activeControls","features","initialPage","getStoreInfo","missing","shortcut","filterDescription"],ye=pe.reduce((a,t)=>({...a,[t]:{table:{disable:!0}}}),{});export{Ce as O,ye as d};
//# sourceMappingURL=default-arg-types-cb0b6f4d.js.map

import{j as e,a as s,F as ee}from"./jsx-runtime-6809449a.js";import{u as te,b as ae,M as se,a as q,B as k,c as re}from"./index-7e2f8217.js";import{r as n,R as ie}from"./index-e67e0a49.js";const oe=({key:a,overviewEntry:t,goToPage:r})=>{let o="green";return t.reached||(o="grey"),t.visible||(o="red"),e(n.Fragment,{children:s("li",{style:{listStyle:"none",color:o},onClick:()=>r({page:t.page}),children:[s("div",{className:"row",children:[t.page,t.label]}),t.children.length>0&&e(L,{overview:t.children,goToPage:r})]})},a)},L=({overview:a,goToPage:t})=>e("ol",{children:a.map(r=>e(oe,{overviewEntry:r,goToPage:t},`view-${r.lunaticId}`))});L.__docgenInfo={description:"",methods:[],displayName:"Overview"};const ne=""+new URL("preloader-9efc7014.svg",import.meta.url).href;function O({status:a,children:t}){return a?s("div",{className:"waiting",children:[e("img",{src:ne,alt:"loading"}),e("div",{className:"content",children:t})]}):null}O.defaultProps={status:!1};const le=ie.memo(O);O.__docgenInfo={description:"",methods:[],displayName:"Waiting",props:{status:{defaultValue:{value:"false",computed:!1},required:!1}}};function ce(){return{}}function de({goToPage:a,getData:t,lastReachedPage:r}){const[o,d]=n.useState(1);function u(m,l){d(l)}return s("div",{className:"dev-options",children:[s("div",{style:{display:"flex"},children:[e(k,{onClick:()=>q.log(t(!0)),children:"Get Data"}),e(k,{onClick:()=>a({page:`${o}`}),children:`Go to "${o}"`})]}),e(re,{id:"page-to-jump",value:o,handleChange:u,min:1,label:"Page to reach : "})]})}function ue({goPrevious:a,goNext:t,goToPage:r,lastReachedPage:o,isLast:d,isFirst:u,pageTag:m,maxPage:l,getData:P,pager:p}){if(l&&l>1){const h=k;return s(ee,{children:[s("div",{className:"pagination",children:[e(h,{onClick:a,disabled:u,children:"Previous"}),e(h,{onClick:t,disabled:d,children:"Next"}),e("div",{style:{fontSize:".8em",opacity:.7,marginTop:".3em"},children:"You can use PgDown / PgUp shortcut"})]}),e(de,{goToPage:r,getData:P,lastReachedPage:o}),s("div",{className:"story-pager",children:[e("h3",{children:"Pager"}),s("ul",{children:[s("li",{children:[e("strong",{children:"PageTag:"})," ",JSON.stringify(m)]}),Object.keys(p).map(g=>s("li",{children:[s("strong",{children:[g,":"]})," ",JSON.stringify(p[g])]},g))]})]})]})}return null}function ge(a,t,r){q.log("onChange",{response:a,value:t,args:r})}function fe(){q.log("no missing strategy")}function D({source:a,data:t,management:r=!1,shortcut:o=!1,activeControls:d=!1,features:u,initialPage:m="1",getStoreInfo:l=ce,missing:P=!1,missingStrategy:p=fe,missingShortcut:h,autoSuggesterLoading:g,addExternal:pe,preferences:M,custom:R,showOverview:x=!1,filterDescription:_=!0,getReferentiel:j,dontKnowButton:T,refusedButton:$,readOnly:E,...he}){const{maxPage:A}=a,{getComponents:B,goPreviousPage:C,goNextPage:v,goToPage:V,pager:F,pageTag:f,isFirstPage:G,isLastPage:U,waiting:W,overview:J,compileControls:I,getData:z,Provider:K}=te(a,t,{initialPage:m,features:u,preferences:M,onChange:ge,custom:R,autoSuggesterLoading:g,getReferentiel:j,management:r,missing:P,missingStrategy:p,missingShortcut:h,shortcut:o,activeControls:d,withOverview:x,dontKnowButton:T,refusedButton:$}),Y=B(),{lastReachedPage:H}=F,[y,Q]=n.useState({}),[N,w]=n.useState(null),X=n.useCallback(i=>{w(void 0),v(i)},[v]),Z=n.useCallback(()=>w(void 0),[]),S=n.useCallback(()=>{const{currentErrors:i,isCritical:c}=I();Q({...y,[f]:i||{}}),i&&Object.keys(i).length>0?w({currentErrors:i,isCritical:c}):v()},[I,y,v,f]);return n.useEffect(()=>{const i=c=>{let b=!1;c.key==="PageDown"&&(S(),b=!0),c.key==="PageUp"&&(C(),b=!0),b&&(c.preventDefault(),c.stopPropagation())};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[S,C]),e(K,{children:s("div",{className:"container story-with-sidebar",children:[e("div",{className:"components",children:e(ae,{autoFocusKey:f,components:Y,componentProps:({storeName:i})=>({errors:y[f],filterDescription:_,disabled:E,...i?l(i):{}})})}),s("aside",{children:[e(ue,{goPrevious:C,goNext:S,goToPage:V,lastReachedPage:H,isLast:U,isFirst:G,pageTag:f,maxPage:A,getData:z,pager:F}),x&&e(L,{overview:J,goToPage:V}),N&&e(se,{errors:N.currentErrors,goNext:X,onClose:Z,isCritical:N.isCritical}),e(le,{status:W,children:e("div",{className:"waiting-orchestrator",children:"Initialisation des donnÃ©es de suggestion..."})})]})]})})}const ye=n.memo(D);D.__docgenInfo={description:"",methods:[],displayName:"OrchestratorForStories",props:{management:{defaultValue:{value:"false",computed:!1},required:!1},shortcut:{defaultValue:{value:"false",computed:!1},required:!1},activeControls:{defaultValue:{value:"false",computed:!1},required:!1},initialPage:{defaultValue:{value:"'1'",computed:!1},required:!1},getStoreInfo:{defaultValue:{value:`function getStoreInfoRequired() {
	return {};
}`,computed:!1},required:!1},missing:{defaultValue:{value:"false",computed:!1},required:!1},missingStrategy:{defaultValue:{value:`function logMissingStrategy() {
	Logger.log('no missing strategy');
}`,computed:!1},required:!1},showOverview:{defaultValue:{value:"false",computed:!1},required:!1},filterDescription:{defaultValue:{value:"true",computed:!1},required:!1}}};const me=["source","id","pagination","data","management","activeControls","features","initialPage","getStoreInfo","missing","shortcut","filterDescription"],Ne=me.reduce((a,t)=>({...a,[t]:{table:{disable:!0}}}),{});export{ye as O,Ne as d};
//# sourceMappingURL=default-arg-types-0452b622.js.map

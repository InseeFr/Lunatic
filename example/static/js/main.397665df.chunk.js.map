{"version":3,"sources":["img/lunatic-logo.png","collect/orchestrator.js","management/orchestrator.js","home.js","index.js"],"names":["module","exports","__webpack_require__","p","isComponentsConcernedByResponse","responseName","component","response","name","options","filter","o","length","Orchestrator","_useState","useState","simspons","_useState2","Object","slicedToArray","questionnaire","setQuestionnaire","onChange","update","valueType","_Object$entries$","entries","value","components","reduce","_","c","push","objectSpread","valueState","__","v","concat","toConsumableArray","console","log","componentType","cells","updateQuestionnaire","lunatic","map","q","id","Component","react_default","a","createElement","className","key","assign","handleChange","labelPosition","preferences","buildUpdatedResponse","newValue","includes","slice","indexOf","type","find","updatedValue","tooltip","Home","fakeRoute","setFakeRoute","Fragment","alt","src","logo","onClick","orchestrator","management_orchestrator","ReactDOM","render","home","document","getElementById"],"mappings":"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","file":"static/js/main.397665df.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lunatic-logo.f2d2cbf3.png\";","import React, { useState } from 'react';\nimport * as lunatic from '@inseefr/lunatic';\nimport simspons from './simpsons';\n\nconst updateQuestionnaire = valueType => questionnaire => update => {\n\tconst [name, value] = Object.entries(update)[0];\n\tconst components = questionnaire.components.reduce((_, c) => {\n\t\tif (!isComponentsConcernedByResponse(name)(c)) {\n\t\t\t_.push(c);\n\t\t\treturn _;\n\t\t} else if (c.response) {\n\t\t\t_.push({\n\t\t\t\t...c,\n\t\t\t\tresponse: {\n\t\t\t\t\t...c.response,\n\t\t\t\t\tvalueState: c.response.valueState.reduce((__, v) => {\n\t\t\t\t\t\tif (v.valueType === valueType) return [...__, { ...v, value }];\n\t\t\t\t\t\treturn [...__, v];\n\t\t\t\t\t}, []),\n\t\t\t\t},\n\t\t\t});\n\t\t} else if (c.options) console.log('options', c.componentType);\n\t\telse if (c.cells) console.log('cells', c.componentType);\n\t\telse _.push(c);\n\t\treturn _;\n\t}, []);\n\treturn { ...questionnaire, components };\n};\n\nconst isComponentsConcernedByResponse = responseName => component =>\n\t(component.response && component.response.name === responseName) ||\n\t(component.options &&\n\t\tcomponent.options.filter(\n\t\t\to => o.response && o.response.name === responseName\n\t\t).length !== 0);\n\nconst Orchestrator = () => {\n\tconst [questionnaire, setQuestionnaire] = useState(simspons);\n\tconst onChange = update => {\n\t\tsetQuestionnaire(updateQuestionnaire('EDITED')(questionnaire)(update));\n\t};\n\tconsole.log(lunatic.getState(questionnaire));\n\tconst components = questionnaire.components.map(q => {\n\t\tconst { id, componentType } = q;\n\t\tconst Component = lunatic[componentType];\n\t\treturn (\n\t\t\t<div className=\"lunatic lunatic-component\" key={`component-${id}`}>\n\t\t\t\t<Component\n\t\t\t\t\t{...q}\n\t\t\t\t\thandleChange={onChange}\n\t\t\t\t\tlabelPosition=\"TOP\"\n\t\t\t\t\tpreferences={['COLLECTED', 'FORCED', 'EDITED']}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t});\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"components\">{components}</div>\n\t\t</div>\n\t);\n};\n\nexport default Orchestrator;\n","import React, { useState } from 'react';\nimport * as lunatic from '@inseefr/lunatic';\nimport simspons from './simpsons';\n\nconst updateQuestionnaire = valueType => questionnaire => preferences => updatedValue => {\n\tconst [name, value] = Object.entries(updatedValue)[0];\n\tconst components = questionnaire.components.reduce((_, c) => {\n\t\tif (!isComponentsConcernedByResponse(name)(c)) {\n\t\t\t_.push(c);\n\t\t\treturn _;\n\t\t} else if (c.response) {\n\t\t\t_.push(buildUpdatedResponse(c)(preferences)(valueType)(value));\n\t\t} else if (c.options) console.log('options', c.componentType);\n\t\telse if (c.cells) console.log('cells', c.componentType);\n\t\telse _.push(c);\n\t\treturn _;\n\t}, []);\n\treturn { ...questionnaire, components };\n};\n\nconst buildUpdatedResponse = component => preferences => valueType => value => {\n\tlet newValue = value;\n\tif (preferences.includes(valueType)) {\n\t\tconst toCheck = preferences.slice(0, preferences.indexOf(valueType));\n\t\tconst lastValue = toCheck.reduce(\n\t\t\t(_, type) =>\n\t\t\t\tcomponent.response.valueState.find(v => v.valueType === type).value ||\n\t\t\t\t_,\n\t\t\t''\n\t\t);\n\t\tif (value === lastValue) newValue = null;\n\t}\n\treturn {\n\t\t...component,\n\t\tresponse: {\n\t\t\t...component.response,\n\t\t\tvalueState: component.response.valueState.reduce((__, v) => {\n\t\t\t\tif (v.valueType === valueType)\n\t\t\t\t\treturn [...__, { ...v, value: newValue }];\n\t\t\t\treturn [...__, v];\n\t\t\t}, []),\n\t\t},\n\t};\n};\n\nconst isComponentsConcernedByResponse = responseName => component =>\n\t(component.response && component.response.name === responseName) ||\n\t(component.options &&\n\t\tcomponent.options.filter(\n\t\t\to => o.response && o.response.name === responseName\n\t\t).length !== 0);\n\nconst Orchestrator = () => {\n\tconst [questionnaire, setQuestionnaire] = useState(simspons);\n\tconst preferences = ['COLLECTED', 'FORCED', 'EDITED'];\n\tconst onChange = updatedValue => {\n\t\tsetQuestionnaire(\n\t\t\tupdateQuestionnaire('EDITED')(questionnaire)(preferences)(updatedValue)\n\t\t);\n\t};\n\tconsole.log(lunatic.getState(questionnaire));\n\tconst components = questionnaire.components.map(q => {\n\t\tconst { id, componentType } = q;\n\t\tconst Component = lunatic[componentType];\n\t\treturn (\n\t\t\t<div className=\"lunatic lunatic-component\" key={`component-${id}`}>\n\t\t\t\t<Component\n\t\t\t\t\t{...q}\n\t\t\t\t\thandleChange={onChange}\n\t\t\t\t\tlabelPosition=\"TOP\"\n\t\t\t\t\tpreferences={preferences}\n\t\t\t\t\ttooltip={true}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t});\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"components\">{components}</div>\n\t\t</div>\n\t);\n};\n\nexport default Orchestrator;\n","import React, { useState } from 'react';\nimport logo from './img/lunatic-logo.png';\nimport CollectOrchestrator from './collect';\nimport ManagementOrchestrator from './management';\nimport './custom-lunatic.scss';\n\nconst Home = () => {\n\tconst [fakeRoute, setFakeRoute] = useState('/collect');\n\treturn (\n\t\t<>\n\t\t\t<div className=\"lunatic-img-container\">\n\t\t\t\t<img\n\t\t\t\t\tclassName=\"lunatic-img\"\n\t\t\t\t\talt=\"lunatic\"\n\t\t\t\t\tsrc={logo}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tfakeRoute === '/collect'\n\t\t\t\t\t\t\t? setFakeRoute('/management')\n\t\t\t\t\t\t\t: setFakeRoute('/collect')\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{fakeRoute === '/collect' ? (\n\t\t\t\t<CollectOrchestrator />\n\t\t\t) : (\n\t\t\t\t<ManagementOrchestrator />\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default Home;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Home from './home';\nimport './index.scss';\n\nReactDOM.render(<Home />, document.getElementById('root'));\n"],"sourceRoot":""}
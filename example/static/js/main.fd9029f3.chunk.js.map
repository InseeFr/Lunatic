{"version":3,"sources":["img/lunatic-logo.png","collect/orchestrator.js","management/orchestrator.js","home.js","index.js"],"names":["module","exports","__webpack_require__","p","isComponentsConcernedByResponse","responseName","component","response","name","options","filter","o","length","Orchestrator","_useState","useState","simspons","_useState2","Object","slicedToArray","questionnaire","setQuestionnaire","onChange","update","valueType","_Object$entries$","entries","value","components","reduce","_","c","push","objectSpread","valueState","__","v","concat","toConsumableArray","console","log","componentType","cells","updateQuestionnaire","lunatic","map","q","id","Component","react_default","a","createElement","className","key","assign","handleChange","labelPosition","preferences","tooltip","Home","fakeRoute","setFakeRoute","Fragment","alt","src","logo","onClick","orchestrator","management_orchestrator","ReactDOM","render","home","document","getElementById"],"mappings":"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","file":"static/js/main.fd9029f3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lunatic-logo.f2d2cbf3.png\";","import React, { useState } from 'react';\nimport * as lunatic from '@inseefr/lunatic';\nimport simspons from './simpsons';\n\nconst updateQuestionnaire = valueType => questionnaire => update => {\n\tconst [name, value] = Object.entries(update)[0];\n\tconst components = questionnaire.components.reduce((_, c) => {\n\t\tif (!isComponentsConcernedByResponse(name)(c)) {\n\t\t\t_.push(c);\n\t\t\treturn _;\n\t\t} else if (c.response) {\n\t\t\t_.push({\n\t\t\t\t...c,\n\t\t\t\tresponse: {\n\t\t\t\t\t...c.response,\n\t\t\t\t\tvalueState: c.response.valueState.reduce((__, v) => {\n\t\t\t\t\t\tif (v.valueType === valueType) return [...__, { ...v, value }];\n\t\t\t\t\t\treturn [...__, v];\n\t\t\t\t\t}, []),\n\t\t\t\t},\n\t\t\t});\n\t\t} else if (c.options) console.log('options', c.componentType);\n\t\telse if (c.cells) console.log('cells', c.componentType);\n\t\telse _.push(c);\n\t\treturn _;\n\t}, []);\n\treturn { ...questionnaire, components };\n};\n\nconst isComponentsConcernedByResponse = responseName => component =>\n\t(component.response && component.response.name === responseName) ||\n\t(component.options &&\n\t\tcomponent.options.filter(\n\t\t\to => o.response && o.response.name === responseName\n\t\t).length !== 0);\n\nconst Orchestrator = () => {\n\tconst [questionnaire, setQuestionnaire] = useState(simspons);\n\tconst onChange = update => {\n\t\tsetQuestionnaire(updateQuestionnaire('EDITED')(questionnaire)(update));\n\t};\n\tconsole.log(lunatic.getState(questionnaire));\n\tconst components = questionnaire.components.map(q => {\n\t\tconst { id, componentType } = q;\n\t\tconst Component = lunatic[componentType];\n\t\treturn (\n\t\t\t<div className=\"lunatic lunatic-component\" key={`component-${id}`}>\n\t\t\t\t<Component\n\t\t\t\t\t{...q}\n\t\t\t\t\thandleChange={onChange}\n\t\t\t\t\tlabelPosition=\"TOP\"\n\t\t\t\t\tpreferences={['COLLECTED', 'FORCED', 'EDITED']}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t});\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"components\">{components}</div>\n\t\t</div>\n\t);\n};\n\nexport default Orchestrator;\n","import React, { useState } from 'react';\nimport * as lunatic from '@inseefr/lunatic';\nimport simspons from './simpsons';\n\nconst updateQuestionnaire = valueType => questionnaire => update => {\n\tconst [name, value] = Object.entries(update)[0];\n\tconst components = questionnaire.components.reduce((_, c) => {\n\t\tif (!isComponentsConcernedByResponse(name)(c)) {\n\t\t\t_.push(c);\n\t\t\treturn _;\n\t\t} else if (c.response) {\n\t\t\t_.push({\n\t\t\t\t...c,\n\t\t\t\tresponse: {\n\t\t\t\t\t...c.response,\n\t\t\t\t\tvalueState: c.response.valueState.reduce((__, v) => {\n\t\t\t\t\t\tif (v.valueType === valueType) return [...__, { ...v, value }];\n\t\t\t\t\t\treturn [...__, v];\n\t\t\t\t\t}, []),\n\t\t\t\t},\n\t\t\t});\n\t\t} else if (c.options) console.log('options', c.componentType);\n\t\telse if (c.cells) console.log('cells', c.componentType);\n\t\telse _.push(c);\n\t\treturn _;\n\t}, []);\n\treturn { ...questionnaire, components };\n};\n\nconst isComponentsConcernedByResponse = responseName => component =>\n\t(component.response && component.response.name === responseName) ||\n\t(component.options &&\n\t\tcomponent.options.filter(\n\t\t\to => o.response && o.response.name === responseName\n\t\t).length !== 0);\n\nconst Orchestrator = () => {\n\tconst [questionnaire, setQuestionnaire] = useState(simspons);\n\tconst onChange = update => {\n\t\tsetQuestionnaire(updateQuestionnaire('EDITED')(questionnaire)(update));\n\t};\n\tconsole.log(lunatic.getState(questionnaire));\n\tconst components = questionnaire.components.map(q => {\n\t\tconst { id, componentType } = q;\n\t\tconst Component = lunatic[componentType];\n\t\treturn (\n\t\t\t<div className=\"lunatic lunatic-component\" key={`component-${id}`}>\n\t\t\t\t<Component\n\t\t\t\t\t{...q}\n\t\t\t\t\thandleChange={onChange}\n\t\t\t\t\tlabelPosition=\"TOP\"\n\t\t\t\t\tpreferences={['COLLECTED', 'FORCED', 'EDITED']}\n\t\t\t\t\ttooltip={true}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t});\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"components\">{components}</div>\n\t\t</div>\n\t);\n};\n\nexport default Orchestrator;\n","import React, { useState } from 'react';\nimport logo from './img/lunatic-logo.png';\nimport CollectOrchestrator from './collect';\nimport ManagementOrchestrator from './management';\nimport './custom-lunatic.scss';\n\nconst Home = () => {\n\tconst [fakeRoute, setFakeRoute] = useState('/collect');\n\treturn (\n\t\t<>\n\t\t\t<div className=\"lunatic-img-container\">\n\t\t\t\t<img\n\t\t\t\t\tclassName=\"lunatic-img\"\n\t\t\t\t\talt=\"lunatic\"\n\t\t\t\t\tsrc={logo}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tfakeRoute === '/collect'\n\t\t\t\t\t\t\t? setFakeRoute('/management')\n\t\t\t\t\t\t\t: setFakeRoute('/collect')\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{fakeRoute === '/collect' ? (\n\t\t\t\t<CollectOrchestrator />\n\t\t\t) : (\n\t\t\t\t<ManagementOrchestrator />\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default Home;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Home from './home';\nimport './index.scss';\n\nReactDOM.render(<Home />, document.getElementById('root'));\n"],"sourceRoot":""}
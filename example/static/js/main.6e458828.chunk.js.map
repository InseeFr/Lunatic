{"version":3,"sources":["img/lunatic-logo.png","orchestrator.js","collect/orchestrator.js","management/orchestrator.js","home.js","index.js"],"names":["module","exports","__webpack_require__","p","buildUpdatedResponse","component","preferences","valueType","value","newValue","includes","slice","indexOf","reduce","_","type","response","valueState","find","v","Object","objectSpread","__","concat","toConsumableArray","isComponentsConcernedByResponse","responseName","name","options","filter","o","length","Orchestrator","_ref","savingType","source","tooltip","_useState","useState","_useState2","slicedToArray","questionnaire","setQuestionnaire","onChange","updatedValue","_Object$entries$","entries","components","c","push","console","log","componentType","cells","updateQuestionnaire","lunatic","map","q","id","Component","react_default","a","createElement","className","key","assign","handleChange","labelPosition","CollectOrchestrator","orchestrator","simspons","ManagementOrchestrator","Home","fakeRoute","setFakeRoute","Fragment","alt","src","logo","onClick","collect_orchestrator","management_orchestrator","ReactDOM","render","home","document","getElementById"],"mappings":"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","file":"static/js/main.6e458828.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lunatic-logo.f2d2cbf3.png\";","import React, { useState } from 'react';\nimport * as lunatic from '@inseefr/lunatic';\n\nconst updateQuestionnaire = valueType => questionnaire => preferences => updatedValue => {\n\tconst [name, value] = Object.entries(updatedValue)[0];\n\tconst components = questionnaire.components.reduce((_, c) => {\n\t\tif (!isComponentsConcernedByResponse(name)(c)) {\n\t\t\t_.push(c);\n\t\t\treturn _;\n\t\t} else if (c.response) {\n\t\t\t_.push(buildUpdatedResponse(c)(preferences)(valueType)(value));\n\t\t} else if (c.options) console.log('options', c.componentType);\n\t\telse if (c.cells) console.log('cells', c.componentType);\n\t\telse _.push(c);\n\t\treturn _;\n\t}, []);\n\treturn { ...questionnaire, components };\n};\n\nconst buildUpdatedResponse = component => preferences => valueType => value => {\n\tlet newValue = value;\n\tif (preferences.includes(valueType)) {\n\t\tconst toCheck = preferences.slice(0, preferences.indexOf(valueType));\n\t\tconst lastValue = toCheck.reduce(\n\t\t\t(_, type) =>\n\t\t\t\tcomponent.response.valueState.find(v => v.valueType === type).value ||\n\t\t\t\t_,\n\t\t\t''\n\t\t);\n\t\tif (value === lastValue) newValue = null;\n\t}\n\treturn {\n\t\t...component,\n\t\tresponse: {\n\t\t\t...component.response,\n\t\t\tvalueState: component.response.valueState.reduce((__, v) => {\n\t\t\t\tif (v.valueType === valueType)\n\t\t\t\t\treturn [...__, { ...v, value: newValue }];\n\t\t\t\treturn [...__, v];\n\t\t\t}, []),\n\t\t},\n\t};\n};\n\nconst isComponentsConcernedByResponse = responseName => component =>\n\t(component.response && component.response.name === responseName) ||\n\t(component.options &&\n\t\tcomponent.options.filter(\n\t\t\to => o.response && o.response.name === responseName\n\t\t).length !== 0);\n\nconst Orchestrator = ({ savingType, preferences, source, tooltip }) => {\n\tconst [questionnaire, setQuestionnaire] = useState(source);\n\tconst onChange = updatedValue => {\n\t\tsetQuestionnaire(\n\t\t\tupdateQuestionnaire(savingType)(questionnaire)(preferences)(updatedValue)\n\t\t);\n\t};\n\tconsole.log(lunatic.getState(questionnaire));\n\tconst components = questionnaire.components.map(q => {\n\t\tconst { id, componentType } = q;\n\t\tconst Component = lunatic[componentType];\n\t\treturn (\n\t\t\t<div className=\"lunatic lunatic-component\" key={`component-${id}`}>\n\t\t\t\t<Component\n\t\t\t\t\t{...q}\n\t\t\t\t\thandleChange={onChange}\n\t\t\t\t\tlabelPosition=\"TOP\"\n\t\t\t\t\tpreferences={preferences}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t});\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"components\">{components}</div>\n\t\t</div>\n\t);\n};\n\nexport default Orchestrator;\n","import React from 'react';\nimport Orchestrator from '../orchestrator';\nimport simspons from './simpsons';\n\nconst CollectOrchestrator = () => (\n\t<Orchestrator\n\t\tsavingType=\"COLLECTED\"\n\t\tpreferences={['COLLECTED']}\n\t\tsource={simspons}\n\t/>\n);\n\nexport default CollectOrchestrator;\n","import React from 'react';\nimport Orchestrator from '../orchestrator';\nimport simspons from './simpsons';\n\nconst ManagementOrchestrator = () => (\n\t<Orchestrator\n\t\tsavingType=\"EDITED\"\n\t\tpreferences={['COLLECTED', 'FORCED', 'EDITED']}\n\t\tsource={simspons}\n\t\ttooltip={true}\n\t/>\n);\n\nexport default ManagementOrchestrator;\n","import React, { useState } from 'react';\nimport logo from './img/lunatic-logo.png';\nimport CollectOrchestrator from './collect';\nimport ManagementOrchestrator from './management';\nimport './custom-lunatic.scss';\n\nconst Home = () => {\n\tconst [fakeRoute, setFakeRoute] = useState('/collect');\n\treturn (\n\t\t<>\n\t\t\t<div className=\"lunatic-img-container\">\n\t\t\t\t<img\n\t\t\t\t\tclassName=\"lunatic-img\"\n\t\t\t\t\talt=\"lunatic\"\n\t\t\t\t\tsrc={logo}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tfakeRoute === '/collect'\n\t\t\t\t\t\t\t? setFakeRoute('/management')\n\t\t\t\t\t\t\t: setFakeRoute('/collect')\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{fakeRoute === '/collect' ? (\n\t\t\t\t<CollectOrchestrator />\n\t\t\t) : (\n\t\t\t\t<ManagementOrchestrator />\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default Home;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Home from './home';\nimport './index.scss';\n\nReactDOM.render(<Home />, document.getElementById('root'));\n"],"sourceRoot":""}
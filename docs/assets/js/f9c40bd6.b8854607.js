"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5693],{7716:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>c,toc:()=>o});var i=s(4848),r=s(8453),t=s(8094);const d={},l="Param\xe8tres",c={id:"hook/parameters",title:"Param\xe8tres",description:"Le premier point d'entr\xe9e avec la librairie est le hook useLunatic(source, data, options) qui prend 3 arguments :",source:"@site/docs/hook/parameters.mdx",sourceDirName:"hook",slug:"/hook/parameters",permalink:"/Lunatic/docs/hook/parameters",draft:!1,unlisted:!1,editUrl:"https://github.com/InseeFr/Lunatic/tree/3.0/docs/docs/hook/parameters.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"hook useLunatic()",permalink:"/Lunatic/docs/category/hook-uselunatic"},next:{title:"Retour",permalink:"/Lunatic/docs/hook/return"}},a={},o=[{value:"Options <GoToType></GoToType>",id:"options",level:2},{value:"Vue d&#39;ensemble",id:"vue-densemble",level:3},{value:"Utilisation",id:"utilisation",level:4},{value:"Structure des donn\xe9es de vue d&#39;ensemble",id:"structure-des-donn\xe9es-de-vue-densemble",level:4},{value:"Suivi des changements",id:"trackChanges",level:3},{value:"Mode &quot;Ne sais pas&quot; / &quot;Refus&quot;",id:"missing",level:3},{value:"Mode &quot;management&quot;",id:"management",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"param\xe8tres",children:"Param\xe8tres"}),"\n","\n",(0,i.jsxs)(n.p,{children:["Le premier point d'entr\xe9e avec la librairie est le hook ",(0,i.jsx)(n.code,{children:"useLunatic(source, data, options)"})," qui prend 3 arguments :"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Un objet source correspondant \xe0 un ",(0,i.jsx)(n.a,{href:"https://github.com/InseeFr/Lunatic-Model",children:"mod\xe8le lunatic"}),". ",(0,i.jsx)(t.e,{type:"LunaticSource"})]}),"\n",(0,i.jsxs)(n.li,{children:["Un objet contenant les donn\xe9es du formulaire (s'il a \xe9t\xe9 pr\xe9rempli par exemple) ",(0,i.jsx)(t.e,{type:"LunaticData"})]}),"\n",(0,i.jsxs)(n.li,{children:["Un ",(0,i.jsx)(n.a,{href:"#options",children:"objet d'option"})," pour d\xe9finir des comportements sp\xe9cifique ",(0,i.jsx)(t.e,{type:"LunaticOptions"})]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"options",children:["Options ",(0,i.jsx)(t.e,{type:"LunaticOptions"})]}),"\n",(0,i.jsxs)(n.p,{children:["Toutes les options sont ",(0,i.jsx)(n.strong,{children:"optionnelles"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"features"}),", active le support du VTL et du Markdown (d\xe9faut ",(0,i.jsx)(n.code,{children:"['VTL', 'MD']"}),")."]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.del,{children:[(0,i.jsx)(n.strong,{children:"preferences"})," (d\xe9faut ",(0,i.jsx)(n.code,{children:"['COLLECTED']"}),"), non utilis\xe9"]})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"savingType"}),", d\xe9finit dans quelle clef sauvegarder les donn\xe9es (d\xe9faut ",(0,i.jsx)(n.code,{children:"'COLLECTED'"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"onChange"}),", m\xe9thode appel\xe9e lorsqu'une variable change suite \xe0 une action utilisateur (doit \xeatre m\xe9mo\xefs\xe9 car utilis\xe9 en d\xe9pendance d'un useCallback en interne). (optionnel ",(0,i.jsx)(n.code,{children:"(response: {name: string}, value: any, args?: {iteration?: number}) => {}"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"management"}),", active le ",(0,i.jsx)(n.a,{href:"#management",children:"mode management"})," (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"shortcut"}),", active les racourcis clavier pour les cases \xe0 cocher / radio et boutons ne sait pas / refus (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"initialPage"}),", d\xe9finit la page de d\xe9marrage (d\xe9faut ",(0,i.jsx)(n.code,{children:"'1'"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"lastReachedPage"}),", d\xe9finit la derni\xe8re page atteinte (d\xe9faut ",(0,i.jsx)(n.code,{children:"undefined"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"autoSuggesterLoading"}),", active le pr\xe9chargement des donn\xe9es du suggester \xe0 l'initialisation de Lunatic (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"getReferentiel"})," promesse appel\xe9e pour r\xe9cup\xe9rer les nomenclatures necessaire au fonctionnement des suggesters (",(0,i.jsx)(n.code,{children:"(name: string) => Promise<Array<unknown>>"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"activeControls"})," active les controles (default ",(0,i.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"withOverview"}),", active le syst\xe8me de ",(0,i.jsx)(n.a,{href:"#vue-densemble",children:"vue d'ensemble"})," (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"missing"}),", active le syst\xe8me de ",(0,i.jsx)(n.a,{href:"#missing",children:"missing"})," (Ne sait pas / Refus) (d\xe9fault ",(0,i.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"missingStrategy"})," fonction ex\xe9cut\xe9e au clique sur un button missing (d\xe9faut ",(0,i.jsx)(n.code,{children:"emptyFn"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"missingShortcut"})," raccourcis clavier d\xe9clanchant les boutons missing (d\xe9faut ",(0,i.jsx)(n.code,{children:"{ dontKnow: '', refused: '' }"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"dontKnowButton"}),' label du bouton "Ne sait pas" (d\xe9faut ',(0,i.jsx)(n.code,{children:"{ fr: 'Ne sais pas', en: \"Don't know\" }"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"refusedButton"}),' label du bouton "Refus" (d\xe9faut ',(0,i.jsx)(n.code,{children:"{ fr: 'Refus', en: 'Refused' }"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"trackChanges"}),", active le ",(0,i.jsx)(n.a,{href:"#trackChanges",children:"suivi des changements"})," (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),"),"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"vue-densemble",children:"Vue d'ensemble"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"withOverview"}),", active le syst\xe8me de vue d'ensemble (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"utilisation",children:"Utilisation"}),"\n",(0,i.jsxs)(n.p,{children:["Pour activer le syst\xe8me de vue d'ensemble, d\xe9finissez ",(0,i.jsx)(n.code,{children:"withOverview"})," sur ",(0,i.jsx)(n.code,{children:"true"})," lors de l'appel \xe0 ",(0,i.jsx)(n.code,{children:"useLunatic"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const {\n    overview\n} = useLunatic(source, data, {withOverview: true})\n"})}),"\n",(0,i.jsx)(n.h4,{id:"structure-des-donn\xe9es-de-vue-densemble",children:"Structure des donn\xe9es de vue d'ensemble"}),"\n",(0,i.jsxs)(n.p,{children:["Lorsque l'option ",(0,i.jsx)(n.code,{children:"withOverview"}),"  est activ\xe9e, le retour de ",(0,i.jsx)(n.code,{children:"useLunatic"})," inclura une propri\xe9t\xe9 ",(0,i.jsx)(n.code,{children:"overview"}),", qui est un tableau d'objets de type ",(0,i.jsx)(n.code,{children:"InterpretedLunaticOverviewItem"}),". L'overview est constitu\xe9 de l'ensemble des s\xe9quences du questionnaire, chaque sequence peut contenir des sous s\xe9quence qui seront disponible dans ",(0,i.jsx)(n.code,{children:"children"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Chaque \xe9l\xe9ment de la vue d'ensemble a la structure suivante :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"}),": Identifiant unique de l'\xe9l\xe9ment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"type"}),": Type de l'\xe9l\xe9ment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"page"}),": Tag de la page o\xf9 se trouve l'\xe9l\xe9ment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"label"}),": Libell\xe9 de l'\xe9l\xe9ment, rendu avec React."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"description"}),": Description de l'\xe9l\xe9ment, rendue avec React."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"reached"}),": Indique si l'\xe9l\xe9ment a \xe9t\xe9 atteint."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"current"}),": Indique si nous sommes actuellement dans cet \xe9l\xe9ment ou dans un de ses enfants."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"children"}),": Tableau des sous-\xe9l\xe9ments de l'\xe9l\xe9ment."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,i.jsx)(n.code,{children:"children"})," contient les sous-s\xe9quences de la s\xe9quence principale."]}),"\n",(0,i.jsx)(n.h3,{id:"trackChanges",children:"Suivi des changements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"trackChanges"}),", active le suivi des changements (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),"),"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Afin de simplifier le suivi des changements ",(0,i.jsx)(n.code,{children:"@inseefr/lunatic"})," offre un syst\xe8me int\xe9gr\xe9 permettant d'obtenir les variables modifi\xe9es entre 2 \xe9tapes. Cela permet par exemple de mettre en place une synchronisation partielle des donn\xe9es au fil du remplissage du formulaire (plut\xf4t que d'attendre la finalisation du formulaire)."]}),"\n",(0,i.jsxs)(n.p,{children:["Pour activer ce mode de suivi, passez l'option ",(0,i.jsx)(n.code,{children:"trackChanges"})," \xe0 ",(0,i.jsx)(n.code,{children:"true"}),". Le hook ",(0,i.jsx)(n.code,{children:"useLunatic()"})," renverra alors 2 m\xe9thodes suppl\xe9mentaires permettant de contr\xf4ler le suivi des changements."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const {\n    getChangedData,\n    resetChangedData,\n} = useLunatic(source, data, {trackChanges: true})\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"getChangedData(reset: boolean = false)"}),", r\xe9cup\xe8re les donn\xe9es qui ont chang\xe9 depuis le dernier reset. Le format de retour est le m\xeame que ",(0,i.jsx)(n.code,{children:"getData()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"resetChangedData()"}),", vide le dictionnaire des variables chang\xe9e"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"missing",children:'Mode "Ne sais pas" / "Refus"'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"missing"})," (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Ce mode permet \xe0 l'utilisateur d'indiquer qu'il ne connait pas la r\xe9ponse \xe0 une question ou qu'il souhaite ne pas y r\xe9pondre. Des options suppl\xe9mentaires permettent de d\xe9finir le comportement des boutons."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"missingStrategy"})," fonction ex\xe9cut\xe9e au clique sur un button missing (d\xe9faut ",(0,i.jsx)(n.code,{children:"emptyFn"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"missingShortcut"})," raccourcis clavier d\xe9clanchant les boutons missing (d\xe9faut ",(0,i.jsx)(n.code,{children:"{ dontKnow: '', refused: '' }"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"dontKnowButton"}),' label du bouton "Ne sait pas" (d\xe9faut ',(0,i.jsx)(n.code,{children:"{ fr: 'Ne sais pas', en: \"Don't know\" }"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"refusedButton"}),' label du bouton "Refus" (d\xe9faut ',(0,i.jsx)(n.code,{children:"{ fr: 'Refus', en: 'Refused' }"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Pour chaque champ une clef ",(0,i.jsx)(n.code,{children:"missingResponse"})," doit enregistrer le choix fait par l'utilisateur."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "missingResponse": { "name": "READY_MISSING" }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["La valeur de cette r\xe9ponse sera ",(0,i.jsx)(n.code,{children:"RF"})," en cas de refus, ",(0,i.jsx)(n.code,{children:"DK"}),' en cas de "Je ne sais pas".']}),"\n",(0,i.jsx)(n.h3,{id:"management",children:'Mode "management"'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"management"}),", active le mode management (d\xe9faut ",(0,i.jsx)(n.code,{children:"false"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Ce mode permet de g\xe9rer plusieurs \xe9tats de la m\xeame variable (utilis\xe9 par les positions de r\xe9cup\xe9ration). L'administrateur pourra osciller entre le mode ",(0,i.jsx)(n.code,{children:"COLLECTED"}),", ",(0,i.jsx)(n.code,{children:"EDITED"}),", ",(0,i.jsx)(n.code,{children:"INPUTTED"}),"..."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Ce mode n'est pas encore impl\xe9ment\xe9, l'option ",(0,i.jsx)(n.code,{children:"management"})," n'a pas donc pas d'effet pour le moment."]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8094:(e,n,s)=>{s.d(n,{e:()=>r});var i=s(4848);function r(e){let{type:n}=e;const s=`https://github.com/search?q=repo%3AInseeFr%2FLunatic+%22export+type+${n}%22&type=code`;return(0,i.jsxs)("a",{className:"button button--secondary",style:{display:"inline-flex",alignItems:"center",gap:".3rem"},href:s,target:"_blank",rel:"noopener noreferrer",children:["Voir le type",(0,i.jsx)("svg",{width:"13.5",height:"13.5","aria-hidden":"true",viewBox:"0 0 24 24",className:"iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module",children:(0,i.jsx)("path",{fill:"currentColor",d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"})})]})}}}]);
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7159],{992:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>u,toc:()=>c});var r=a(4848),s=a(8453);const l=JSON.parse('{"$schema":"../../../lunatic-schema.json","suggesters":[{"responseNames":["VARIABLE_COMMUNE"],"name":"L_COMMUNEPASSEE-1-2-0","fields":[{"name":"label","rules":["[\\\\w]+"],"language":"French","min":3,"stemmer":false},{"name":"id","rules":["[\\\\w]+"],"language":"French","min":3,"stemmer":false}],"queryParser":{"type":"tokenized","params":{"language":"French","pattern":"[\\\\w.]+","min":3,"stemmer":false}},"version":"1"},{"responseNames":["VARIABLE_PAYS"],"name":"L_PAYS-1-2-0","fields":[{"name":"label","rules":["[\\\\w]+"],"language":"French","min":3,"stemmer":false}],"queryParser":{"type":"tokenized","params":{"language":"French","pattern":"[\\\\w.]+","min":3,"stemmer":false}},"version":"1"},{"responseNames":["VARIABLE_NATIONALITE"],"name":"L_NATIONALITE-1-2-0","fields":[{"name":"label","rules":["[\\\\w]+"],"language":"French","min":3,"stemmer":false}],"queryParser":{"type":"tokenized","params":{"language":"French","pattern":"[\\\\w.]+","min":3,"stemmer":false}},"version":"1"},{"responseNames":["VARIABLE_PCS"],"name":"L_PCS_HOMMES-1-5-0","fields":[{"name":"label","rules":["[\\\\w]+"],"language":"French","min":3,"stemmer":false,"synonyms":{"accueil":["ACCEUIL"],"\xe9chafaudage":["ECHAFFAUDAGE"],"URSSAF":["URSAF","URSAFF"],"ing\xe9nierie":["INGENIEURIE","INGENERIE","INGIENERIE"],"construction":["CONSTRUCTEUR"],"distribution":["DISTRIBUTEUR"],"fabrication":["FABRICANT"],"abattoir":["ABATOIR","ABBATOIR","ABATOIRE","ABATTOIRE"],"ascenseur":["ASCENCEUR"],"ascenseurs":["ASCENCEURS"],"assenseur":["ASSENCEUR"],"joaillerie":["JOAILLIER"],"agroalimentaire":["AGGROALIMANTAIRE","AGROALIMANTAIRE"],"alimentaires":["ALIMANTAIRE"],"agroalimentaires":["AGGROALIMANTAIRES","AGROALIMENTAIRES"]}}],"queryParser":{"type":"tokenized","params":{"language":"French","pattern":"[\\\\w.]+","min":3,"stemmer":false}},"version":"1","meloto":true,"stopWords":["a","au","dans","de","des","du","en","er","la","le","ou","sur","d","l","aux","dans","un","une","pour","avec","chez","par","les"]},{"responseNames":["VARIABLE_BAILLEURS_SOCIAUX"],"name":"bailleurs_sociaux-1-5-0","fields":[{"name":"label","rules":["[\\\\w]+"],"language":"French","min":3,"stemmer":false}],"queryParser":{"type":"tokenized","params":{"language":"French","pattern":"[\\\\w.]+","min":3,"stemmer":false}},"version":"1"}],"components":[{"componentType":"Suggester","response":{"name":"VARIABLECO"},"optionResponses":[{"name":"VARIABLECO_NAME","attribute":"label"}],"storeName":"L_COMMUNEPASSEE-1-2-0","hierarchy":{"sequence":{"id":"lt4fhgd6","page":"1","label":{"type":"VTL|MD","value":"\\"I - \\" || \\"Sequence\\""}}},"conditionFilter":{"type":"VTL","value":"true"},"id":"lt4ezymk","page":"1","label":{"type":"VTL|MD","value":"\\"\u27a1 1. \\" || \\"Variable Commune\\""},"optionLabel":{"type":"VTL","value":"\\"id || \\" - \\" || label\\""},"mandatory":false,"maxLength":249},{"componentType":"Suggester","response":{"name":"VARIABLEPA"},"storeName":"L_PAYS-1-2-0","conditionFilter":{"type":"VTL","value":"true"},"id":"lt4fjoev","page":"2","label":{"type":"VTL|MD","value":"\\"\u27a1 2. \\" || \\"Variable Pays\\""},"mandatory":false,"maxLength":249},{"componentType":"Suggester","storeName":"L_NATIONALITE-1-2-0","response":{"name":"VARIABLENA"},"conditionFilter":{"type":"VTL","value":"true"},"id":"lt4f6i2y","page":"3","label":{"type":"VTL|MD","value":"\\"\u27a1 3. \\" || \\"Variable Nationalit\xe9\\""},"mandatory":false,"maxLength":249},{"componentType":"Suggester","storeName":"L_PCS_HOMMES-1-5-0","response":{"name":"VARIABLE_P"},"conditionFilter":{"type":"VTL","value":"true"},"id":"lt4f9q1o","page":"4","label":{"type":"VTL|MD","value":"\\"\u27a1 4. \\" || \\"VARIABLE_PCS\\""},"mandatory":false,"maxLength":249},{"componentType":"Suggester","storeName":"bailleurs_sociaux-1-5-0","response":{"name":"VARIABLE_B"},"conditionFilter":{"type":"VTL","value":"true"},"id":"lt4f8uba","page":"5","label":{"type":"VTL|MD","value":"\\"\u27a1 5. \\" || \\"VARIABLE_BAILLEURS_SOCIAUX\\""},"mandatory":false,"maxLength":249}],"pagination":"question","resizing":{},"label":{"type":"VTL|MD","value":"Suggester"},"lunaticModelVersion":"2.5.0","modele":"SUGGESTER","enoCoreVersion":"2.7.1","generatingDate":"27-02-2024 13:43:43","missing":false,"id":"lt4f6mib","maxPage":"5","variables":[{"variableType":"COLLECTED","values":{"COLLECTED":null,"EDITED":null,"INPUTTED":null,"FORCED":null,"PREVIOUS":null},"name":"COMMENT_QE"},{"variableType":"COLLECTED","values":{"COLLECTED":null,"EDITED":null,"INPUTTED":null,"FORCED":null,"PREVIOUS":null},"name":"VARIABLECO"},{"variableType":"COLLECTED","values":{"COLLECTED":null,"EDITED":null,"INPUTTED":null,"FORCED":null,"PREVIOUS":null},"name":"VARIABLECO_NAME"},{"variableType":"COLLECTED","values":{"COLLECTED":null,"EDITED":null,"INPUTTED":null,"FORCED":null,"PREVIOUS":null},"name":"VARIABLEPA"},{"variableType":"COLLECTED","values":{"COLLECTED":null,"EDITED":null,"INPUTTED":null,"FORCED":null,"PREVIOUS":null},"name":"VARIABLENA"},{"variableType":"COLLECTED","values":{"COLLECTED":null,"EDITED":null,"INPUTTED":null,"FORCED":null,"PREVIOUS":null},"name":"VARIABLE_P"},{"variableType":"COLLECTED","values":{"COLLECTED":null,"EDITED":null,"INPUTTED":null,"FORCED":null,"PREVIOUS":null},"name":"VARIABLE_B"},{"variableType":"CALCULATED","expression":{"type":"VTL","value":"true"},"name":"FILTER_RESULT_VARIABLECO","inFilter":"false"},{"variableType":"CALCULATED","expression":{"type":"VTL","value":"true"},"name":"FILTER_RESULT_VARIABLEPA","inFilter":"false"},{"variableType":"CALCULATED","expression":{"type":"VTL","value":"true"},"name":"FILTER_RESULT_VARIABLENA","inFilter":"false"},{"variableType":"CALCULATED","expression":{"type":"VTL","value":"true"},"name":"FILTER_RESULT_VARIABLE_P","inFilter":"false"},{"variableType":"CALCULATED","expression":{"type":"VTL","value":"true"},"name":"FILTER_RESULT_VARIABLE_B","inFilter":"false"}]}');var t=a(4186);const i={},o="Suggester",u={id:"components/fields/suggester",title:"Suggester",description:"Le composant de Suggester permet d'avoir un menu d\xe9roulant avec une option de recherche.",source:"@site/docs/components/fields/suggester.mdx",sourceDirName:"components/fields",slug:"/components/fields/suggester",permalink:"/Lunatic/docs/components/fields/suggester",draft:!1,unlisted:!1,editUrl:"https://github.com/InseeFr/Lunatic/tree/3.0/docs/docs/components/fields/suggester.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Dropdown",permalink:"/Lunatic/docs/components/fields/dropdown"},next:{title:"Radio",permalink:"/Lunatic/docs/components/fields/radio"}},d={},c=[{value:"Indexation",id:"indexation",level:2},{value:"R\xe9cup\xe9ration des donn\xe9es de la nomenclature",id:"r\xe9cup\xe9ration-des-donn\xe9es-de-la-nomenclature",level:2},{value:"Valeur arbitraire",id:"valeur-arbitraire",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"suggester",children:"Suggester"})}),"\n",(0,r.jsxs)(n.p,{children:["Le composant de ",(0,r.jsx)(n.code,{children:"Suggester"})," permet d'avoir un menu d\xe9roulant avec une option de recherche."]}),"\n","\n",(0,r.jsx)(t.L,{source:l}),"\n",(0,r.jsx)(n.h2,{id:"indexation",children:"Indexation"}),"\n",(0,r.jsxs)(n.p,{children:["Dans le fichier source la liste des donn\xe9es \xe0 rendre disponible et d\xe9finit dans la propri\xe9t\xe9 ",(0,r.jsx)(n.code,{children:"suggesters"}),". Vous pouvez retrouver les d\xe9tails sur le format de cette d\xe9finition en regardant le type ",(0,r.jsx)(n.a,{href:"https://github.com/InseeFr/Lunatic/blob/3.0/src/use-lunatic/type-source.ts",children:"SuggesterType"})," dans le code source. Il y a 3 parties importantes :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"fields"}),", permet de d\xe9finir les champs qui vont \xeatre index\xe9 pour la recherche."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"queryParser"}),", permet de d\xe9finir les r\xe8gles \xe0 appliquer \xe0 la chaine de recherche."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"name"}),", nom de la nomenclature, qui sera utilis\xe9 dans la propri\xe9t\xe9 ",(0,r.jsx)(n.code,{children:"storeName"})," du composant mais aussi pour la r\xe9cup\xe9ration de la nomenclature dans ",(0,r.jsx)(n.code,{children:"getReferentiel()"})," ."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Lors de l'initialisation de Lunatic \xe0 l'aide du hook ",(0,r.jsx)(n.code,{children:"useLunatic()"})," il faut pr\xe9ciser l'option ",(0,r.jsx)(n.code,{children:"getReferentiel()"})," qui permet d'indiquer comment charger les donn\xe9es associ\xe9es au r\xe9f\xe9rentiel :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const {} = useLunatic(source, data, {\n    //...\n    getReferentiel: async (name) => {\n\t    return fetch(`https://insee.fr/referentiel/${name}.json`).then((r) => r.json());\n\t}\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:["La nomenclature doit n\xe9cessairement contenir un champ ",(0,r.jsx)(n.code,{children:"id"})," qui doit \xeatre unique pour chaque enregistrement et ",(0,r.jsx)(n.code,{children:"label"})," qui sert \xe0 l'affichage des options dans le suggester mais peut aussi contenir d'autre champs."]}),"\n",(0,r.jsx)(n.h2,{id:"r\xe9cup\xe9ration-des-donn\xe9es-de-la-nomenclature",children:"R\xe9cup\xe9ration des donn\xe9es de la nomenclature"}),"\n",(0,r.jsx)(n.p,{children:"Lors de la s\xe9lection on peut vouloir r\xe9cup\xe9rer des informations suppl\xe9mentaires dans la nomenclature (cat\xe9gorie d'un produit, unit\xe9, prix...)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n\t{\n\t\t"id": "brosse",\n\t\t"label": "Brosse \xe0 cheveux",\n\t\t"price": 20\n\t},\n\t{\n\t\t"id": "balle",\n\t\t"label": "Balle rebondissante",\n\t\t"price": 10\n\t}\n]\n'})}),"\n",(0,r.jsx)(n.p,{children:"Dans ce cas, il est possible d'ajoute une option dans le JSON afin d'envoyer la donn\xe9es de certains champs dans des variables sp\xe9cifique lors d'un choix."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "componentType": "Suggester",\n    "response": {\n        "name": "PRODUCT"\n    },\n    "optionResponses": [\n        {\n            "name": "PRODUCT_NAME",\n            "attribute": "label"\n        },\n        {\n            "name": "PRODUCT_PRICE",\n            "attribute": "price"\n        }\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Lors de la s\xe9lection d'un \xe9l\xe9ment"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PRODUCT"})," recevra l'ID du produit"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PRODUCT_NAME"})," recevra son libell\xe9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PRODUCT_PRICE"})," recevra son prix"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"valeur-arbitraire",children:"Valeur arbitraire"}),"\n",(0,r.jsxs)(n.p,{children:["Il est possible de permettre \xe0 l'utilisateur de rentrer une valeur arbitraire si aucune option ne correspond \xe0 sa recherche.\nDans ce cas-l\xe0, il faudra ajouter un champ ",(0,r.jsx)(n.code,{children:"arbitrary"})," pour permettre de sauvegarder cette valeur arbitraire."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "componentType": "Suggester",\n    "response": {\n        "name": "PRODUCT"\n    },\n    "arbitrary": {\n        "response": { "name": "PRODUCT_OTHER" }\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Le champ ",(0,r.jsx)(n.code,{children:"arbitrary.response"})," d\xe9finit la variable qui recevra la valeur arbitraire."]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}}}]);
(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6903],{8606:(e,n,r)=>{"use strict";r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>u,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>m});var t=r(4848),s=r(8453),o=r(9489),a=r(7227),i=r(3067),c=r(1415);const l={sidebar_position:1,slug:"/"},u="D\xe9marrage",d={id:"intro",title:"D\xe9marrage",description:"Lunatic est une biblioth\xe8que React pour afficher des questionnaires con\xe7us sur l'outil Pogues et g\xe9n\xe9r\xe9s au format Lunatic-Model via Eno.",source:"@site/docs/intro.mdx",sourceDirName:".",slug:"/",permalink:"/Lunatic/docs/",draft:!1,unlisted:!1,editUrl:"https://github.com/InseeFr/Lunatic/tree/3.0/docs/docs/intro.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/"},sidebar:"docs",next:{title:"hook useLunatic()",permalink:"/Lunatic/docs/category/hook-uselunatic"}},p={},m=[{value:"Pour commencer",id:"pour-commencer",level:2},{value:"Exemple",id:"exemple",level:2}];function g(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"d\xe9marrage",children:"D\xe9marrage"})}),"\n",(0,t.jsxs)(n.p,{children:["Lunatic est une biblioth\xe8que ",(0,t.jsx)(n.strong,{children:"React"})," pour afficher des questionnaires con\xe7us sur l'outil ",(0,t.jsx)(n.a,{href:"https://github.com/inseeFr/pogues",children:"Pogues"})," et g\xe9n\xe9r\xe9s au format ",(0,t.jsx)(n.a,{href:"https://github.com/InseeFr/Lunatic-Model",children:"Lunatic-Model"})," via ",(0,t.jsx)(n.a,{href:"https://github.com/inseeFr/eno",children:"Eno"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"pour-commencer",children:"Pour commencer"}),"\n",(0,t.jsxs)(n.p,{children:["Pour commencer \xe0 utiliser Lunatic dans votre application il faut t\xe9l\xe9charger la d\xe9pendance depuis ",(0,t.jsx)(n.code,{children:"npm"}),"."]}),"\n",(0,t.jsxs)(o.A,{groupId:"npm2yarn",children:[(0,t.jsx)(a.A,{value:"npm",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install @inseefr/lunatic\n"})})}),(0,t.jsx)(a.A,{value:"yarn",label:"Yarn",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yarn add @inseefr/lunatic\n"})})}),(0,t.jsx)(a.A,{value:"pnpm",label:"pnpm",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm add @inseefr/lunatic\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"Ensuite la librairie se d\xe9compose en 2 parties :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["un hook ",(0,t.jsx)(n.code,{children:"useLunatic()"})," qui permet de lire un fichier ",(0,t.jsx)(n.a,{href:"https://github.com/InseeFr/Lunatic-Model",children:"Lunatic-Model"})," et d'offrir les diff\xe9rentes fonctionnalit\xe9s permettant de naviguer dans les composants."]}),"\n",(0,t.jsxs)(n.li,{children:["un composant ",(0,t.jsx)(n.code,{children:"<LunaticComponents/>"})," qui permet d'afficher la liste des composants."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"exemple",children:"Exemple"}),"\n","\n",(0,t.jsx)(c.L,{source:i})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(g,{...e})}):g(e)}},1415:(e,n,r)=>{"use strict";r.d(n,{L:()=>p});const t={FormExample:"FormExample_a30K",FormExampleRender:"FormExampleRender_QfqF",FormExampleCode:"FormExampleCode_XePV","margin-top--md":"margin-top--md_TH4F"};var s=r(9489),o=r(7227),a=r(2250);const i="import {\n  type LunaticData,\n  type LunaticSource,\n  useLunatic,\n  LunaticComponents,\n} from '@inseefr/lunatic';\nimport '@inseefr/lunatic/lib/main.css'\n\ntype Props = {\n  source: LunaticSource;\n  data: LunaticData;\n};\n\nexport function FormRenderer({ source, data }: Props) {\n  const { getComponents, Provider } = useLunatic(source, data, {\n    initialPage: '1',\n  });\n  return (\n    <Provider>\n      <LunaticComponents components={getComponents()} />\n    </Provider>\n  );\n}\n",c="import {\n  type LunaticData,\n  type LunaticSource,\n  type LunaticState,\n  useLunatic,\n  LunaticComponents,\n  ModalControls,\n} from '@inseefr/lunatic';\nimport { useState } from 'react';\n\ntype Props = {\n  source: LunaticSource;\n  data: LunaticData;\n  options?: {initialPage?: LunaticState['pageTag']},\n};\n\nexport function FormRendererWithNavigation({ source, data, options }: Props) {\n  const {\n    getComponents,\n    isLastPage,\n    isFirstPage,\n    goPreviousPage,\n    goNextPage,\n    Provider,\n    compileControls,\n  } = useLunatic(source, data, {\n    initialPage: '1' as LunaticState['pageTag'],\n    ...options\n  });\n\n  // Les contr\xf4les doivent \xeatre v\xe9rifi\xe9s manuellement\n  const [errors, setErrors] = useState<ReturnType<typeof compileControls>>();\n  const handleNext = () => {\n    const currentPageErrors = compileControls();\n    if (currentPageErrors.currentErrors) {\n      setErrors(currentPageErrors);\n    } else {\n      goNextPage();\n    }\n  };\n  const forceNext = () => {\n    setErrors(undefined);\n    goNextPage();\n  };\n  const closeModal = () => {\n    setErrors(undefined);\n  };\n\n  return (\n    <div>\n      <Provider>\n        <LunaticComponents\n          components={getComponents()}\n          componentProps={() => ({\n            errors: errors?.currentErrors,\n          })}\n        />\n      </Provider>\n      <div style={{ marginTop: '.7rem', display: 'flex', gap: '.2rem' }}>\n        <button className=\"button button--primary\" disabled={isFirstPage} onClick={goPreviousPage}>\n          Pr\xe9c\xe9dent\n        </button>\n        <button className=\"button button--primary\" disabled={isLastPage} onClick={handleNext}>\n          Suivant\n        </button>\n      </div>\n      {errors && (\n        <ModalControls\n          errors={errors.currentErrors}\n          goNext={forceNext}\n          onClose={closeModal}\n          isCritical={errors.isCritical}\n        />\n      )}\n    </div>\n  );\n}\n";var l=r(9813),u=r(4848);const d={};function p(e){let{source:n,data:p=d,options:m}=e;const g=n.maxPage&&"1"!==n.maxPage;return(0,u.jsxs)("div",{className:t.FormExample,children:[(0,u.jsxs)(s.A,{children:[(0,u.jsx)(o.A,{value:"source",label:"Source",default:!0,children:(0,u.jsx)(a.A,{language:"json",className:t.FormExampleCode,children:JSON.stringify(n,null,2)})}),(0,u.jsx)(o.A,{value:"data",label:"Data",children:(0,u.jsx)(a.A,{language:"json",className:t.FormExampleCode,children:JSON.stringify(p,null,2)})})]}),(0,u.jsxs)(s.A,{children:[(0,u.jsx)(o.A,{value:"code",label:"Code",children:(0,u.jsx)(a.A,{language:"tsx",className:t.FormExampleCode,children:g?c:i})}),(0,u.jsx)(o.A,{value:"render",label:"Rendu",default:!0,children:(0,u.jsx)("div",{className:t.FormExampleRender,children:(0,u.jsx)(l.A,{fallback:(0,u.jsx)("div",{children:"Loading..."}),children:()=>{const e=g?r(2937).g:r(7171).S;return(0,u.jsx)(e,{source:n,data:p,options:m})}})})})]})]})}},7171:(e,n,r)=>{"use strict";r.d(n,{S:()=>o});var t=r(3779),s=r(4848);function o(e){let{source:n,data:r}=e;const{getComponents:o,Provider:a}=(0,t.O1)(n,r,{initialPage:"1"});return(0,s.jsx)(a,{children:(0,s.jsx)(t.R2,{components:o()})})}},2937:(e,n,r)=>{"use strict";r.d(n,{g:()=>a});var t=r(3779),s=r(6540),o=r(4848);function a(e){let{source:n,data:r,options:a}=e;const{getComponents:i,isLastPage:c,isFirstPage:l,goPreviousPage:u,goNextPage:d,Provider:p,compileControls:m}=(0,t.O1)(n,r,{initialPage:"1",...a}),[g,h]=(0,s.useState)();return(0,o.jsxs)("div",{children:[(0,o.jsx)(p,{children:(0,o.jsx)(t.R2,{components:i(),componentProps:()=>({errors:g?.currentErrors})})}),(0,o.jsxs)("div",{style:{marginTop:".7rem",display:"flex",gap:".2rem"},children:[(0,o.jsx)("button",{className:"button button--primary",disabled:l,onClick:u,children:"Pr\xe9c\xe9dent"}),(0,o.jsx)("button",{className:"button button--primary",disabled:c,onClick:()=>{const e=m();e.currentErrors?h(e):d()},children:"Suivant"})]}),g&&(0,o.jsx)(t.I1,{errors:g.currentErrors,goNext:()=>{h(void 0),d()},onClose:()=>{h(void 0)},isCritical:g.isCritical})]})}},5843:()=>{},3067:e=>{"use strict";e.exports=JSON.parse('{"components":[{"componentType":"Input","label":{"value":"\\"Nom de l\'occupant principal.\\"","type":"VTL|MD"},"maxLength":30,"id":"surname","description":{"value":"\\"For example, Bob.\\"","type":"VTL|MD"},"response":{"name":"NOM"},"page":"1"}],"variables":[{"variableType":"COLLECTED","name":"NOM","componentRef":"name","values":{"PREVIOUS":null,"COLLECTED":null,"FORCED":null,"EDITED":null,"INPUTTED":null}}]}')}}]);
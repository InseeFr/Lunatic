(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6255],{78:(e,n,s)=>{"use strict";s.r(n),s.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>x,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var t=s(4848),a=s(8453),i=s(1415);const r=JSON.parse('{"maxPage":"5","components":[{"id":"seq","componentType":"Sequence","label":{"value":"\\"Description des individus de votre logement\\"","type":"VTL|MD"},"conditionFilter":{"value":"true","type":"VTL"},"page":"1"},{"id":"loop-prenom","componentType":"RosterForLoop","label":{"value":"\\"Ajouter un individu\\"","type":"VTL|MD"},"conditionFilter":{"value":"true","type":"VTL"},"bindingDependencies":["PRENOM"],"lines":{"min":{"value":"1","type":"VTL"},"max":{"value":"10","type":"VTL"}},"page":"1","components":[{"componentType":"Input","label":{"value":"\\"Pr\xe9nom\\"","type":"VTL|MD"},"conditionFilter":{"value":"true","type":"VTL"},"maxLength":30,"bindingDependencies":["PRENOM"],"id":"prenom","response":{"name":"PRENOM"}}]},{"id":"age-loop","componentType":"Loop","paginatedLoop":true,"iterations":{"value":"count(PRENOM)","type":"VTL"},"page":"2","maxPage":"1","conditionFilter":{"value":"true","type":"VTL"},"loopDependencies":["PRENOM"],"components":[{"id":"age-quest","label":{"value":"\\"\xc2ge de \\" || PRENOM","type":"VTL|MD"},"conditionFilter":{"type":"VTL","value":"true"},"componentType":"InputNumber","page":"2.1","response":{"name":"AGE"}}]},{"id":"pairwise-links","componentType":"PairwiseLinks","conditionFilter":{"value":"true","type":"VTL"},"xAxisIterations":{"value":"count(PRENOM)","type":"VTL"},"yAxisIterations":{"value":"count(PRENOM)","type":"VTL"},"page":"3","symLinks":{"LINKS":{"1":"1","2":"3","3":"2","4":"4","5":"6","6":"5","7":"8","8":"7","9":"10","10":"9","11":"13","12":"12","13":"11","14":null,"15":"15","16":"16","17":"17","18":"18"}},"components":[{"componentType":"Dropdown","id":"dropdown-1","conditionFilter":{"value":"xAxis <> yAxis","type":"VTL"},"label":{"value":"\\"Qui est \\" || yAxis || \\" pour \\" || xAxis || \\" ?\\"","type":"VTL|MD"},"response":{"name":"LINKS"},"options":[{"value":"1","label":{"value":"\\"Son conjoint, sa conjointe\\"","type":"VTL"}},{"value":"2","label":{"value":"\\"Sa m\xe8re, son p\xe8re\\"","type":"VTL"}},{"value":"3","label":{"value":"\\"Sa fille, son fils\\"","type":"VTL"}},{"value":"4","label":{"value":"\\"Sa soeur, son fr\xe8re (y compris demi et quasi)\\"","type":"VTL"}},{"value":"5","label":{"value":"\\"Sa belle-m\xe8re, son beau-p\xe8re (conjoint.e d\'un des parents)\\"","type":"VTL"}},{"value":"6","label":{"value":"\\"L\'enfant du conjoint (belle-fille, beau-fils)\\"","type":"VTL"}},{"value":"7","label":{"value":"\\"Sa belle-m\xe8re, son beau-p\xe8re (parent du conjoint)\\"","type":"VTL"}},{"value":"8","label":{"value":"\\"Sa belle-fille, son beau-fils (conjoint.e d\'un enfant)\\"","type":"VTL"}},{"value":"9","label":{"value":"\\"Sa grand-m\xe8re, son grand-p\xe8re\\"","type":"VTL"}},{"value":"10","label":{"value":"\\"Sa petite-fille, petit-fils\\"","type":"VTL"}},{"value":"11","label":{"value":"\\"Sa tante, son oncle\\"","type":"VTL"}},{"value":"12","label":{"value":"\\"Sa cousine, son cousin\\"","type":"VTL"}},{"value":"13","label":{"value":"\\"Sa ni\xe8ce, son neveu\\"","type":"VTL"}},{"value":"14","label":{"value":"\\"Un enfant plac\xe9 en famille d\'accueil\\"","type":"VTL"}},{"value":"15","label":{"value":"\\"Sa belle-soeur, son beau-fr\xe8re\\"","type":"VTL"}},{"value":"16","label":{"value":"\\"Un autre lien familial\\"","type":"VTL"}},{"value":"17","label":{"value":"\\"Un colocataire, sous-locataire\\"","type":"VTL"}},{"value":"18","label":{"value":"\\"Autre lien (employ\xe9 de maison, salari\xe9 log\xe9, jeune au pair \u2026)\\"","type":"VTL"}}]},{"componentType":"Textarea","label":{"value":"\\"Pouvez-vous d\xe9crire le lien entre \\" || xAxis || \\" et \\" || yAxis || \\" ?\\"","type":"VTL|MD"},"conditionFilter":{"value":"LINKS = \\"17\\"","type":"VTL"},"id":"other","response":{"name":"OTHER"}}]},{"id":"pariwise-block","componentType":"Loop","paginatedLoop":true,"iterations":{"value":"count(PRENOM)","type":"VTL"},"page":"4","maxPage":"1","conditionFilter":{"value":"true","type":"VTL"},"loopDependencies":["PRENOM"],"components":[{"componentType":"Textarea","page":"4.1","label":{"value":"PRENOM || \\", why do you live without your parents?\\"","type":"VTL|MD"},"conditionFilter":{"value":"\\"3\\" not_in LINKS and AGE < 18","type":"VTL"},"id":"why","response":{"name":"WHY"}}]},{"componentType":"Sequence","label":{"type":"VTL","value":"\\"END\\""},"page":"5","id":"end"}],"variables":[{"variableType":"COLLECTED","name":"PRENOM","values":{"PREVIOUS":[null],"COLLECTED":[null],"FORCED":[null],"EDITED":[null],"INPUTTED":[null]}},{"variableType":"COLLECTED","name":"AGE","values":{"PREVIOUS":[null],"COLLECTED":[null],"FORCED":[null],"EDITED":[null],"INPUTTED":[null]}},{"variableType":"COLLECTED","name":"LINKS","values":{"PREVIOUS":[[null]],"COLLECTED":[[null]],"FORCED":[[null]],"EDITED":[[null]],"INPUTTED":[[null]]}},{"variableType":"COLLECTED","name":"OTHER","values":{"PREVIOUS":[[null]],"COLLECTED":[[null]],"FORCED":[[null]],"EDITED":[[null]],"INPUTTED":[[null]]}},{"variableType":"COLLECTED","name":"WHY","values":{"PREVIOUS":[null],"COLLECTED":[null],"FORCED":[null],"EDITED":[null],"INPUTTED":[null]}},{"variableType":"CALCULATED","name":"xAxis","expression":{"value":"PRENOM","type":"VTL"},"bindingDependencies":["PRENOM"],"shapeFrom":"PRENOM","inFilter":"false"},{"variableType":"CALCULATED","name":"yAxis","expression":{"value":"PRENOM","type":"VTL"},"bindingDependencies":["PRENOM"],"shapeFrom":"PRENOM","inFilter":"false"}],"resizing":{"PRENOM":{"sizeForLinksVariables":["count(PRENOM)","count(PRENOM)"],"linksVariables":["LINKS"]}}}'),l={},o="PairwiseLinks",d={id:"components/aggregators/pairwise",title:"PairwiseLinks",description:"Le composant lien 2 \xe0 2 permet de d\xe9finir des relations bidirectionnelles entre les donn\xe9es.",source:"@site/docs/components/aggregators/pairwise.mdx",sourceDirName:"components/aggregators",slug:"/components/aggregators/pairwise",permalink:"/Lunatic/docs/components/aggregators/pairwise",draft:!1,unlisted:!1,editUrl:"https://github.com/InseeFr/Lunatic/tree/3.0/docs/docs/components/aggregators/pairwise.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Roundabout",permalink:"/Lunatic/docs/components/aggregators/roundabout"},next:{title:"VTL",permalink:"/Lunatic/docs/vtl"}},u={},c=[{value:"symLinks",id:"symlinks",level:2},{value:"xAxis et yAxis",id:"xaxis-et-yaxis",level:2},{value:"Format des donn\xe9es",id:"format-des-donn\xe9es",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"pairwiselinks",children:"PairwiseLinks"})}),"\n",(0,t.jsxs)(n.p,{children:["Le composant ",(0,t.jsx)(n.strong,{children:"lien 2 \xe0 2"})," permet de d\xe9finir des relations bidirectionnelles entre les donn\xe9es."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"xAxisIterations"}),", nombre d'\xe9l\xe9ments sur le premier axe"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"yAxisIterations"}),", nombre d'\xe9l\xe9ments sur le second axe"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"components"}),", liste des questions \xe0 poser pour chaque combinaison possible"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"symLinks"}),", d\xe9finit la relation bidirectionnelle entre les donn\xe9es"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"symlinks",children:"symLinks"}),"\n",(0,t.jsx)(n.p,{children:"L'option symLinks va permettre d'indiquer la valeur inverse \xe0 une valeur s\xe9lectionn\xe9e. Si on prend l'exemple d'un s\xe9lect avec 3 valeurs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "symLinks": {\n        "LINKS": {\n            "\xe9poux": "\xe9poux",\n            "fils": "parent",\n            "parent": "fils"\n        }\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["De cette mani\xe8re lorsqu'on indiquera que ",(0,t.jsx)(n.strong,{children:"X"})," est ",(0,t.jsx)(n.strong,{children:'"fils"'})," de ",(0,t.jsx)(n.strong,{children:"Y"}),", le syst\xe8me changera aussi la relation inverse pour indiquer que ",(0,t.jsx)(n.strong,{children:"Y"})," est ",(0,t.jsx)(n.strong,{children:'"parent"'})," de ",(0,t.jsx)(n.strong,{children:"X"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"xaxis-et-yaxis",children:"xAxis et yAxis"}),"\n",(0,t.jsxs)(n.p,{children:["Lorsque le pairwise est utilis\xe9, 2 variables calcul\xe9es vont agir de mani\xe8re sp\xe9ciale afin de pouvoir renvoyer les bonnes indications \xe0 l'utilisateur : ",(0,t.jsx)(n.strong,{children:"xAxis"})," et ",(0,t.jsx)(n.strong,{children:"yAxis"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "variableType": "CALCULATED",\n        "name": "xAxis",\n        "expression": { "value": "PRENOM", "type": "VTL" },\n        "bindingDependencies": ["PRENOM"]\n    },\n    {\n        "variableType": "CALCULATED",\n        "name": "yAxis",\n        "expression": { "value": "PRENOM", "type": "VTL" },\n        "bindingDependencies": ["PRENOM"]\n    }\n]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Si ces variables sont utilis\xe9es dans une expression d'un composant du pairwise, le syst\xe8me de calcul ira piocher l'\xe9l\xe9ment au bon index."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "label": {\n        "value": "\\"Qui est \\" || yAxis || \\" pour \\" || xAxis || \\" ?\\"",\n        "type": "VTL|MD"\n    }\n}\n'})}),"\n","\n",(0,t.jsx)(i.L,{source:r,data:{COLLECTED:{PRENOM:{COLLECTED:["Maman","Papa","Fils"]},AGE:{COLLECTED:[30,29,5]},LINKS:{COLLECTED:[[null]]},OTHER:{COLLECTED:[[null]]}}},options:{initialPage:"3"}}),"\n",(0,t.jsx)(n.h2,{id:"format-des-donn\xe9es",children:"Format des donn\xe9es"}),"\n",(0,t.jsx)(n.p,{children:"Les donn\xe9es sont sauvegard\xe9es sous forme d'un tableau \xe0 2 dimensions"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"x \\ y"}),(0,t.jsx)(n.th,{children:"Maman"}),(0,t.jsx)(n.th,{children:"Papa"}),(0,t.jsx)(n.th,{children:"Fils"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Maman"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Papa"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Fils"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:'Si on souhaite indiquer la r\xe9lation Parent (valeur "2") et enfant (valeur "3").\nEn suivant la question "qui est Y pour X ?" le tableau sera compl\xe9t\xe9 de la mani\xe8re suivante.'}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"x \\ y"}),(0,t.jsx)(n.th,{children:"Maman"}),(0,t.jsx)(n.th,{children:"Papa"}),(0,t.jsx)(n.th,{children:"Fils"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Maman"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"3"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Papa"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"3"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Fils"}),(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Ce qui donnera ce tableau en JavaScript"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'[\n    [null, null, "3" ],\n    [null, null, "3" ],\n    ["2",  "2",  null]\n]\n'})})]})}function x(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},1415:(e,n,s)=>{"use strict";s.d(n,{L:()=>p});const t={FormExample:"FormExample_a30K",FormExampleRender:"FormExampleRender_QfqF",FormExampleCode:"FormExampleCode_XePV","margin-top--md":"margin-top--md_TH4F"};var a=s(9489),i=s(7227),r=s(2250);const l="import {\n  type LunaticData,\n  type LunaticSource,\n  useLunatic,\n  LunaticComponents,\n} from '@inseefr/lunatic';\nimport '@inseefr/lunatic/lib/main.css'\n\ntype Props = {\n  source: LunaticSource;\n  data: LunaticData;\n};\n\nexport function FormRenderer({ source, data }: Props) {\n  const { getComponents, Provider } = useLunatic(source, data, {\n    initialPage: '1',\n  });\n  return (\n    <Provider>\n      <LunaticComponents components={getComponents()} />\n    </Provider>\n  );\n}\n",o="import {\n  type LunaticData,\n  type LunaticSource,\n  type LunaticState,\n  useLunatic,\n  LunaticComponents,\n  ModalControls,\n} from '@inseefr/lunatic';\nimport { useState } from 'react';\n\ntype Props = {\n  source: LunaticSource;\n  data: LunaticData;\n  options?: {initialPage?: LunaticState['pageTag']},\n};\n\nexport function FormRendererWithNavigation({ source, data, options }: Props) {\n  const {\n    getComponents,\n    isLastPage,\n    isFirstPage,\n    goPreviousPage,\n    goNextPage,\n    Provider,\n    compileControls,\n  } = useLunatic(source, data, {\n    initialPage: '1' as LunaticState['pageTag'],\n    ...options\n  });\n\n  // Les contr\xf4les doivent \xeatre v\xe9rifi\xe9s manuellement\n  const [errors, setErrors] = useState<ReturnType<typeof compileControls>>();\n  const handleNext = () => {\n    const currentPageErrors = compileControls();\n    if (currentPageErrors.currentErrors) {\n      setErrors(currentPageErrors);\n    } else {\n      goNextPage();\n    }\n  };\n  const forceNext = () => {\n    setErrors(undefined);\n    goNextPage();\n  };\n  const closeModal = () => {\n    setErrors(undefined);\n  };\n\n  return (\n    <div>\n      <Provider>\n        <LunaticComponents\n          components={getComponents()}\n          componentProps={() => ({\n            errors: errors?.currentErrors,\n          })}\n        />\n      </Provider>\n      <div style={{ marginTop: '.7rem', display: 'flex', gap: '.2rem' }}>\n        <button className=\"button button--primary\" disabled={isFirstPage} onClick={goPreviousPage}>\n          Pr\xe9c\xe9dent\n        </button>\n        <button className=\"button button--primary\" disabled={isLastPage} onClick={handleNext}>\n          Suivant\n        </button>\n      </div>\n      {errors && (\n        <ModalControls\n          errors={errors.currentErrors}\n          goNext={forceNext}\n          onClose={closeModal}\n          isCritical={errors.isCritical}\n        />\n      )}\n    </div>\n  );\n}\n";var d=s(9813),u=s(4848);const c={};function p(e){let{source:n,data:p=c,options:x}=e;const m=n.maxPage&&"1"!==n.maxPage;return(0,u.jsxs)("div",{className:t.FormExample,children:[(0,u.jsxs)(a.A,{children:[(0,u.jsx)(i.A,{value:"source",label:"Source",default:!0,children:(0,u.jsx)(r.A,{language:"json",className:t.FormExampleCode,children:JSON.stringify(n,null,2)})}),(0,u.jsx)(i.A,{value:"data",label:"Data",children:(0,u.jsx)(r.A,{language:"json",className:t.FormExampleCode,children:JSON.stringify(p,null,2)})})]}),(0,u.jsxs)(a.A,{children:[(0,u.jsx)(i.A,{value:"code",label:"Code",children:(0,u.jsx)(r.A,{language:"tsx",className:t.FormExampleCode,children:m?o:l})}),(0,u.jsx)(i.A,{value:"render",label:"Rendu",default:!0,children:(0,u.jsx)("div",{className:t.FormExampleRender,children:(0,u.jsx)(d.A,{fallback:(0,u.jsx)("div",{children:"Loading..."}),children:()=>{const e=m?s(2937).g:s(7171).S;return(0,u.jsx)(e,{source:n,data:p,options:x})}})})})]})]})}},7171:(e,n,s)=>{"use strict";s.d(n,{S:()=>i});var t=s(3779),a=s(4848);function i(e){let{source:n,data:s}=e;const{getComponents:i,Provider:r}=(0,t.O1)(n,s,{initialPage:"1"});return(0,a.jsx)(r,{children:(0,a.jsx)(t.R2,{components:i()})})}},2937:(e,n,s)=>{"use strict";s.d(n,{g:()=>r});var t=s(3779),a=s(6540),i=s(4848);function r(e){let{source:n,data:s,options:r}=e;const{getComponents:l,isLastPage:o,isFirstPage:d,goPreviousPage:u,goNextPage:c,Provider:p,compileControls:x}=(0,t.O1)(n,s,{initialPage:"1",...r}),[m,v]=(0,a.useState)();return(0,i.jsxs)("div",{children:[(0,i.jsx)(p,{children:(0,i.jsx)(t.R2,{components:l(),componentProps:()=>({errors:m?.currentErrors})})}),(0,i.jsxs)("div",{style:{marginTop:".7rem",display:"flex",gap:".2rem"},children:[(0,i.jsx)("button",{className:"button button--primary",disabled:d,onClick:u,children:"Pr\xe9c\xe9dent"}),(0,i.jsx)("button",{className:"button button--primary",disabled:o,onClick:()=>{const e=x();e.currentErrors?v(e):c()},children:"Suivant"})]}),m&&(0,i.jsx)(t.I1,{errors:m.currentErrors,goNext:()=>{v(void 0),c()},onClose:()=>{v(void 0)},isCritical:m.isCritical})]})}},5843:()=>{}}]);
import{j as r}from"./jsx-runtime-BlAj40OV.js";import{r as k}from"./index-Cs7sjTYM.js";import{y as T,g as E,s as I,L as q,D as _,C as A}from"./Declarations-CcAzpTKH.js";function p({label:a,id:n,description:s,onChange:i,value:e,max:t,readOnly:m,disabled:g}){const N=o=>{!Number.isNaN(o.target.valueAsNumber)&&(t&&o.target.valueAsNumber>t||o.target.valueAsNumber<1)||i(o.target.valueAsNumber)};return r.jsxs("div",{className:T("lunaticDatepickerField",(!t||t>999)&&"lunaticDatepickerFieldLarge"),children:[r.jsxs("label",{htmlFor:n,children:[a,r.jsx("span",{className:"lunaticDatepickerHint",children:s})]}),r.jsx("input",{id:n,type:"number",min:1,max:t,readOnly:m,disabled:g,value:Number.isNaN(e)?"":e,onChange:N,onFocus:o=>o.target.select()})]})}p.__docgenInfo={description:"",methods:[],displayName:"DatepickerField",props:{id:{required:!0,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"string"},description:""},description:{required:!0,tsType:{name:"string"},description:""},max:{required:!1,tsType:{name:"number"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:""},value:{required:!1,tsType:{name:"number"},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};function w({dateFormat:a="YYYY-MM-DD",response:n,handleChanges:s,errors:i,...e}){return r.jsx(x,{...e,dateFormat:a??"YYYY-MM-DD",onChange:t=>s([{name:n.name,value:t}]),errors:E(i,e.id)})}const x=I("Datepicker",a=>{const{disabled:n,readOnly:s,value:i="",dateFormat:e="YYYY-MM-DD",id:t,label:m,errors:g,description:N,declarations:o,onChange:D}=a,y=`lunatic-datepicker-${t}`,Y=e.includes("DD"),v=e.includes("MM"),[u,j]=k.useState(()=>S(i??void 0)),h=d=>c=>{const l=[...u];l[d]=c,j(l),C(l)},C=d=>{const c=e.split("-"),l=d.findIndex(f=>Number.isNaN(f));if(l>-1&&l<=c.length-1){D(null);return}if(e==="YYYY-MM-DD"&&!L(d)){D(null);return}const M=c.map((f,F)=>d[F].toString().padStart(f.length,"0")).join("-");D(M)},b={readOnly:s,disabled:n};return r.jsxs("div",{className:"lunatic-input",children:[r.jsx(q,{htmlFor:t,id:y,description:N,children:m}),r.jsx(_,{type:"AFTER_QUESTION_TEXT",declarations:o,id:t}),r.jsxs("div",{className:"lunaticDatepickerFields",children:[Y&&r.jsx(p,{id:t+"day",label:"Jour",description:"Exemple: 14",max:31,value:u[2],onChange:h(2),...b}),v&&r.jsx(p,{id:t+"month",label:"Mois",description:"Exemple: 07",max:12,value:u[1],onChange:h(1),...b}),r.jsx(p,{id:t+"year",label:"Ann√©e",description:"Exemple: 2023",value:u[0],max:9999,onChange:h(0),...b})]}),r.jsx(A,{errors:g})]})});function S(a){if(!a)return[NaN,NaN,NaN];const n=a.split("-");return[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]}function L(a){const[n,s,i]=a,e=new Date(n,s-1,i);return e.getFullYear()===n&&e.getMonth()===s-1&&e.getDate()===i}w.__docgenInfo={description:"",methods:[],displayName:"Datepicker",props:{dateFormat:{defaultValue:{value:"'YYYY-MM-DD'",computed:!1},required:!1}}};x.__docgenInfo={description:"",methods:[],displayName:"CustomDatepicker"};export{w as D};

import{s as q,j as l,c as Y,a as f,g as E,L as T,C as I}from"./Label-9445101a.js";import{r as P}from"./index-76fb7be0.js";const w=q("Declaration",({children:n,type:e})=>l("div",{"data-testid":"declaration",className:Y("declaration-lunatic",`declaration-${e.toLowerCase()}`),children:n}));function L({id:n,type:e="AFTER_QUESTION_TEXT",declarations:r}){const i=(r==null?void 0:r.filter(a=>a.position===e))??[];return i.length===0?null:l("div",{id:`declarations-${n}-${e}`,className:"declarations-lunatic",children:i.map(({id:a,label:t,declarationType:d})=>l(w,{type:d,children:t},a))})}const O=q("Declarations",L);function c({label:n,id:e,description:r,onChange:i,value:a,max:t,readOnly:d,disabled:g}){const y=s=>{!Number.isNaN(s.target.valueAsNumber)&&(t&&s.target.valueAsNumber>t||s.target.valueAsNumber<1)||i(s.target.valueAsNumber)};return f("div",{className:Y("lunaticDatepickerField",(!t||t>999)&&"lunaticDatepickerFieldLarge"),children:[f("label",{htmlFor:e,children:[n,l("span",{className:"lunaticDatepickerHint",children:r})]}),l("input",{id:e,type:"number",min:1,max:t,readOnly:d,disabled:g,value:Number.isNaN(a)?"":a,onChange:y,onFocus:s=>s.target.select()})]})}try{c.displayName="DatepickerField",c.__docgenInfo={description:"",displayName:"DatepickerField",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: number) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"number"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}function V({dateFormat:n="YYYY-MM-DD",response:e,handleChange:r,errors:i,...a}){return l(R,{...a,dateFormat:n??"YYYY-MM-DD",onChange:t=>r(e,t),errors:E(i,a.id)})}const R=q("Datepicker",n=>{const{disabled:e,readOnly:r,value:i="",dateFormat:a="YYYY-MM-DD",id:t,label:d,errors:g,description:y,declarations:s,onChange:N}=n,v=`lunatic-datepicker-${t}`,C=a.includes("DD"),_=a.includes("MM"),[p,M]=P.useState(()=>S(i??void 0)),b=o=>m=>{const u=[...p];u[o]=m,M(u),F(u)},F=o=>{const m=a.split("-"),u=o.findIndex(D=>Number.isNaN(D));if(u>-1&&u<=m.length-1){N(null);return}if(a==="YYYY-MM-DD"&&!A(o)){N(null);return}const k=m.map((D,x)=>o[x].toString().padStart(D.length,"0")).join("-");N(k)},h={readOnly:r,disabled:e};return f("div",{className:"lunatic-input",children:[l(T,{htmlFor:t,id:v,description:y,children:d}),l(O,{type:"AFTER_QUESTION_TEXT",declarations:s,id:t}),f("div",{className:"lunaticDatepickerFields",children:[C&&l(c,{id:t+"day",label:"Jour",description:"Exemple: 14",max:31,value:p[2],onChange:b(2),...h}),_&&l(c,{id:t+"month",label:"Mois",description:"Exemple: 07",max:12,value:p[1],onChange:b(1),...h}),l(c,{id:t+"year",label:"Ann√©e",description:"Exemple: 2023",value:p[0],max:9999,onChange:b(0),...h})]}),l(I,{errors:g})]})});function S(n){if(!n)return[NaN,NaN,NaN];const e=n.split("-");return[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}function A(n){const[e,r,i]=n,a=new Date(e,r-1,i);return a.getFullYear()===e&&a.getMonth()===r-1&&a.getDate()===i}try{V.displayName="Datepicker",V.__docgenInfo={description:"",displayName:"Datepicker",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"(response: { name: string; }, value: string | null, args?: Record<string, unknown> | undefined) => void"}},errors:{defaultValue:null,description:"",name:"errors",required:!1,type:{name:"{ [id: string]: LunaticError[]; }"}},preferences:{defaultValue:null,description:"",name:"preferences",required:!1,type:{name:'["COLLECTED"]'}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},missing:{defaultValue:null,description:"",name:"missing",required:!1,type:{name:"unknown"}},missingResponse:{defaultValue:null,description:"",name:"missingResponse",required:!1,type:{name:"{ name: string; value?: unknown; }"}},management:{defaultValue:null,description:"",name:"management",required:!1,type:{name:"boolean"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},shortcut:{defaultValue:null,description:"",name:"shortcut",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | null"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},iteration:{defaultValue:null,description:"",name:"iteration",required:!1,type:{name:"number"}},declarations:{defaultValue:null,description:"",name:"declarations",required:!1,type:{name:"{ id: string; declarationType: string; position: string; label: ReactNode; }[]"}},features:{defaultValue:null,description:"",name:"features",required:!1,type:{name:"string[]"}},componentType:{defaultValue:null,description:"",name:"componentType",required:!1,type:{name:"string"}},goNextPage:{defaultValue:null,description:"",name:"goNextPage",required:!1,type:{name:"(() => void)"}},goPreviousPage:{defaultValue:null,description:"",name:"goPreviousPage",required:!1,type:{name:"(() => void)"}},dateFormat:{defaultValue:{value:"YYYY-MM-DD"},description:"",name:"dateFormat",required:!1,type:{name:"enum",value:[{value:'"YYYY-MM-DD"'},{value:'"YYYY-MM"'},{value:'"YYYY"'}]}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"string"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"string"}},response:{defaultValue:null,description:"",name:"response",required:!0,type:{name:"{ name: string; }"}}}}}catch{}export{V as D,O as a};
